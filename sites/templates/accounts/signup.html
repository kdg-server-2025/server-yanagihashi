{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サインアップ</title>
    <link rel="stylesheet" href="{% static 'css/accounts/signup.css' %}">
</head>
<body>
<div class="signup-page">
    <div class="signup-box">
        <h1 class="signup-title">サインアップ</h1>
        <form method="post" enctype="multipart/form-data" action="{% url 'accounts:signup' %}">
            {% csrf_token %}
            {% if form.non_field_errors %}
            <ul class="errorlist">
                {% for error in form.non_field_errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            
            <div class="form-container">
                <!-- 左カラム -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="username">ユーザー名</label>
                        <input type="text" id="username" name="username" class="signup-input"
                            placeholder="ユーザー名（半角英数字、最大150文字）"
                            value="{{ form.username.value|default:'' }}" required>
                        <small class="hint">半角英数字で150文字以内にしてください。</small>
                        {% if form.username.errors %}
                        <ul class="errorlist">
                            {% for error in form.username.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="password1">パスワード</label>
                        <input type="password" id="password1" name="password1" class="signup-input" placeholder="パスワードを入力" required>
                        <small class="hint">最低8文字以上、推測されにくいパスワードにしてください。</small>
                        {% if form.password1.errors %}
                        <ul class="errorlist">
                            {% for error in form.password1.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="birthday">誕生日</label>
                        <input type="date" id="birthday" name="birthday" class="signup-input" value="{{ form.birthday.value|default:'' }}" required>
                        <small class="hint">正確な日付を入力してください。</small>
                        {% if form.birthday.errors %}
                        <ul class="errorlist">
                            {% for error in form.birthday.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>

                <!-- 右カラム -->
                <div class="form-column">
                    <div class="form-group">
                        <label for="email">メールアドレス</label>
                        <input type="email" id="email" name="email" class="signup-input"
                            placeholder="例: example@domain.com"
                            value="{{ form.email.value|default:'' }}" required>
                        <small class="hint">有効なメールアドレスを入力してください。</small>
                        {% if form.email.errors %}
                        <ul class="errorlist">
                            {% for error in form.email.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="password2">パスワード（確認）</label>
                        <input type="password" id="password2" name="password2" class="signup-input" placeholder="パスワードを再入力" required>
                        <small class="hint">上記で入力したパスワードと一致する必要があります。</small>
                        {% if form.password2.errors %}
                        <ul class="errorlist">
                            {% for error in form.password2.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                    <div class="form-group">
                        <label for="icon">アイコン</label>
                        <input type="file" id="icon" name="icon" class="signup-input" accept="image/*">
                        <small class="hint">JPEG, PNG形式の画像をアップロードしてください。</small>
                        <img id="icon-preview" src="" alt="プレビュー画像" style="display: none; max-width: 100%; margin-top: 10px;">
                        {% if form.icon.errors %}
                        <ul class="errorlist">
                            {% for error in form.icon.errors %}
                            <li>{{ error }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn-submit">登録する</button>
        </form>
    </div>
</div>
    <script src="{% static 'js/accounts/icon_preview.js' %}"></script>
</body>
</html>
